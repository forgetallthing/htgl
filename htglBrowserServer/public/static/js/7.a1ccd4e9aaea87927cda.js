webpackJsonp([7],{E9GJ:function(t,e){},QOWT:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("skVP"),i={name:"",data:function(){var t=this;return{fApi:{},model:{},rule:[],option:{form:{labelPosition:"left",labelWidth:"100px"},row:{gutter:10},submitBtn:{innerText:"保存"},onSubmit:function(e){t.saveContractFun(e)}},param:{htbh:"ht_001"},ms_role:"",id:""}},mounted:function(){this.model=this.fApi.model(),this.init()},watch:{},methods:{init:function(){var t=this;if(console.log(this.$route.params),this.param=this.$route.params,this.ms_role=localStorage.getItem("ms_role"),this.$route.params.htbh){var e=this.$loading({target:".content"});Object(o.g)({htbh:this.param.htbh,role:this.ms_role||"admin"}).then(function(n){console.log(n.value),t.rule=n.value.struct,t.id=n.value.data.id,t.$nextTick(function(){t.fApi.setValue(n.value.data)}),setTimeout(function(){},2e3),e.close()},function(t){e.close()})}else this.$router.go(-1)},saveContractFun:function(t){var e=this;for(var n in t)t[n]||(t[n]="");t.id=this.id;var i=this.$loading({target:".content"});Object(o.n)({formData:t}).then(function(t){i.close(),e.$message.success("保存成功")},function(t){i.close()})},handleRemove:function(t,e){console.log(t,e)},handlePreview:function(t){console.log(t)},handleExceed:function(t,e){this.$message.warning("当前限制选择 3 个文件，本次选择了 "+t.length+" 个文件，共选择了 "+(t.length+e.length)+" 个文件")},beforeRemove:function(t,e){return this.$confirm("确定移除 "+t.name+"？")},back:function(){this.$router.go(-1)},exportTable:function(){var t=this,e=this.$loading({target:".content"});Object(o.f)({htbh:this.param.htbh}).then(function(n){console.log(n.value.path);var o=document.createElement("a");o.href="http://106.13.0.214:8000/static/"+t.param.htbh+".csv",o.click(),e.close()},function(t){e.close()})}}},a={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{},[n("el-row",[n("el-col",{attrs:{span:12}},[n("el-button",{attrs:{type:"primary",icon:"el-icon-back",size:"mini"},on:{click:function(e){return t.back()}}},[t._v("返回")])],1),t._v(" "),n("el-col",{staticStyle:{"text-align":"end"},attrs:{hidden:!("admin"===t.ms_role||"finance"===t.ms_role),span:12}},[n("el-button",{attrs:{type:"primary",icon:"el-icon-download",size:"mini"},on:{click:function(e){return t.exportTable()}}},[t._v("导出excel")])],1),t._v(" "),n("el-col",[n("form-create",{ref:"fc",staticClass:"edit-form",attrs:{rule:t.rule,option:t.option},model:{value:t.fApi,callback:function(e){t.fApi=e},expression:"fApi"}})],1)],1)],1)},staticRenderFns:[]};var r=n("VU/8")(i,a,!1,function(t){n("E9GJ")},null,null);e.default=r.exports}});